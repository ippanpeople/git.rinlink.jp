{"severity":"ERROR","time":"2022-10-06T15:56:05.829Z","correlation_id":"889529918fbd3ea5d0d5c65e516f304b","exception.class":"OpenSSL::SSL::SSLError","exception.message":"SSL_connect returned=1 errno=0 state=error: wrong version number","exception.backtrace":["lib/gitlab/net_http_adapter.rb:21:in `connect'","lib/gitlab/http.rb:54:in `perform_request'","lib/gitlab/prometheus_client.rb:153:in `get'","lib/gitlab/prometheus_client.rb:46:in `ready?'","lib/gitlab/utils/usage_data.rb:314:in `block in prometheus_client'","lib/gitlab/utils/usage_data.rb:311:in `each'","lib/gitlab/utils/usage_data.rb:311:in `find'","lib/gitlab/utils/usage_data.rb:311:in `prometheus_client'","lib/gitlab/utils/usage_data.rb:222:in `block in with_prometheus_client'","lib/gitlab/usage_data.rb:656:in `block in with_duration'","lib/gitlab/usage_data.rb:655:in `with_duration'","lib/gitlab/utils/usage_data.rb:221:in `with_prometheus_client'","lib/gitlab/usage_data.rb:700:in `gitaly_apdex'","lib/gitlab/usage_data.rb:216:in `block in system_usage_data_settings'","lib/gitlab/utils/usage_data.rb:200:in `block in alt_usage_data'","lib/gitlab/usage_data.rb:656:in `block in with_duration'","lib/gitlab/usage_data.rb:655:in `with_duration'","lib/gitlab/utils/usage_data.rb:198:in `alt_usage_data'","lib/gitlab/usage_data.rb:216:in `system_usage_data_settings'","lib/gitlab/usage_data.rb:681:in `usage_data_metrics'","lib/gitlab/usage_data.rb:46:in `block in data'","lib/gitlab/utils/usage_data.rb:240:in `with_finished_at'","lib/gitlab/usage_data.rb:45:in `data'","ee/lib/ee/gitlab/usage_data.rb:59:in `block in data'","lib/gitlab/utils/usage_data.rb:240:in `with_finished_at'","ee/lib/ee/gitlab/usage_data.rb:58:in `data'","lib/gitlab/usage/service_ping_report.rb:32:in `block in all_metrics_values'","lib/gitlab/usage/service_ping_report.rb:31:in `all_metrics_values'","lib/gitlab/usage/service_ping_report.rb:12:in `for'","lib/service_ping/build_payload.rb:12:in `raw_payload'","lib/service_ping/build_payload.rb:15:in `filtered_usage_data'","lib/service_ping/build_payload.rb:6:in `execute'","app/workers/gitlab_service_ping_worker.rb:40:in `usage_data'","app/workers/gitlab_service_ping_worker.rb:35:in `block in perform'","lib/gitlab/exclusive_lease_helpers.rb:38:in `in_lock'","app/workers/gitlab_service_ping_worker.rb:31:in `perform'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:26:in `call'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:58:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","lib/gitlab/application_context.rb:110:in `block in use'","lib/gitlab/application_context.rb:110:in `use'","lib/gitlab/sidekiq_middleware/worker_context.rb:11:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:110:in `block in use'","lib/gitlab/application_context.rb:110:in `use'","lib/gitlab/application_context.rb:52:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:37:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:10:in `block in call'","lib/gitlab/with_request_store.rb:17:in `enabling_request_store'","lib/gitlab/with_request_store.rb:10:in `with_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:9:in `call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:76:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:103:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:103:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:75:in `call'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:49:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'"],"user.username":null,"tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"service_ping","tags.correlation_id":"889529918fbd3ea5d0d5c65e516f304b","extra.sidekiq":{"retry":3,"queue":"default","version":0,"queue_namespace":"cronjob","dead":false,"args":[],"class":"GitlabServicePingWorker","jid":"58cd4e1210196a3fc5543545","created_at":1665071716.2014775,"meta.caller_id":"Cronjob","correlation_id":"889529918fbd3ea5d0d5c65e516f304b","meta.root_caller_id":"Cronjob","meta.feature_category":"service_ping","worker_data_consistency":"always","idempotency_key":"resque:gitlab:duplicate:default:f08b08648429384a6800590e6650412b8bf3ae483020a60c2e1d227e13e464e8","size_limiter":"validated","enqueued_at":1665071716.2059395}}
{"severity":"ERROR","time":"2022-10-06T15:56:11.742Z","correlation_id":"889529918fbd3ea5d0d5c65e516f304b","exception.class":"OpenSSL::SSL::SSLError","exception.message":"SSL_connect returned=1 errno=0 state=error: wrong version number","exception.backtrace":["lib/gitlab/net_http_adapter.rb:21:in `connect'","lib/gitlab/http.rb:54:in `perform_request'","lib/gitlab/prometheus_client.rb:153:in `get'","lib/gitlab/prometheus_client.rb:46:in `ready?'","lib/gitlab/utils/usage_data.rb:314:in `block in prometheus_client'","lib/gitlab/utils/usage_data.rb:311:in `each'","lib/gitlab/utils/usage_data.rb:311:in `find'","lib/gitlab/utils/usage_data.rb:311:in `prometheus_client'","lib/gitlab/utils/usage_data.rb:222:in `block in with_prometheus_client'","lib/gitlab/utils/usage_data.rb:48:in `with_duration'","lib/gitlab/utils/usage_data.rb:221:in `with_prometheus_client'","lib/gitlab/usage_data/topology.rb:43:in `topology_fetch_all_data'","lib/gitlab/usage_data/topology.rb:32:in `block in topology_usage_data'","lib/gitlab/utils/usage_data.rb:234:in `block in measure_duration'","lib/gitlab/utils/usage_data.rb:233:in `measure_duration'","lib/gitlab/usage_data/topology.rb:32:in `topology_usage_data'","lib/gitlab/usage_data.rb:340:in `topology_usage_data'","lib/gitlab/usage_data.rb:688:in `usage_data_metrics'","lib/gitlab/usage_data.rb:46:in `block in data'","lib/gitlab/utils/usage_data.rb:240:in `with_finished_at'","lib/gitlab/usage_data.rb:45:in `data'","ee/lib/ee/gitlab/usage_data.rb:59:in `block in data'","lib/gitlab/utils/usage_data.rb:240:in `with_finished_at'","ee/lib/ee/gitlab/usage_data.rb:58:in `data'","lib/gitlab/usage/service_ping_report.rb:32:in `block in all_metrics_values'","lib/gitlab/usage/service_ping_report.rb:31:in `all_metrics_values'","lib/gitlab/usage/service_ping_report.rb:12:in `for'","lib/service_ping/build_payload.rb:12:in `raw_payload'","lib/service_ping/build_payload.rb:15:in `filtered_usage_data'","lib/service_ping/build_payload.rb:6:in `execute'","app/workers/gitlab_service_ping_worker.rb:40:in `usage_data'","app/workers/gitlab_service_ping_worker.rb:35:in `block in perform'","lib/gitlab/exclusive_lease_helpers.rb:38:in `in_lock'","app/workers/gitlab_service_ping_worker.rb:31:in `perform'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:26:in `call'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:58:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","lib/gitlab/application_context.rb:110:in `block in use'","lib/gitlab/application_context.rb:110:in `use'","lib/gitlab/sidekiq_middleware/worker_context.rb:11:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:110:in `block in use'","lib/gitlab/application_context.rb:110:in `use'","lib/gitlab/application_context.rb:52:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:37:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:10:in `block in call'","lib/gitlab/with_request_store.rb:17:in `enabling_request_store'","lib/gitlab/with_request_store.rb:10:in `with_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:9:in `call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:76:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:103:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:103:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:75:in `call'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:49:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'"],"user.username":null,"tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"service_ping","tags.correlation_id":"889529918fbd3ea5d0d5c65e516f304b","extra.sidekiq":{"retry":3,"queue":"default","version":0,"queue_namespace":"cronjob","dead":false,"args":[],"class":"GitlabServicePingWorker","jid":"58cd4e1210196a3fc5543545","created_at":1665071716.2014775,"meta.caller_id":"Cronjob","correlation_id":"889529918fbd3ea5d0d5c65e516f304b","meta.root_caller_id":"Cronjob","meta.feature_category":"service_ping","worker_data_consistency":"always","idempotency_key":"resque:gitlab:duplicate:default:f08b08648429384a6800590e6650412b8bf3ae483020a60c2e1d227e13e464e8","size_limiter":"validated","enqueued_at":1665071716.2059395}}
